<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs',{Title:"Text Share"}) %>
<body>
    <%- include('./partials/navbar.ejs',{active4:"active",active1:"",active2:"",active3:""}) %>

    
    <div class="container">
      
        <div class="row">
          <form action="/Text/save" method="post" id="textForm">
            <textarea style="font-size: large;" id="content" name="content" placeholder="Enter your text here..." class="notepad mt-2"><%=content%></textarea>
            <!-- save button -->

            <div class="save-lock-btn">
            
                <button type="submit" class="bookmarkBtn">
                    <span class="IconContainer">
                      <svg viewBox="0 0 384 512" height="0.9em" class="icon">
                        <path
                          d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"
                        ></path>
                      </svg>
                      
                    </span>
                    <p  class="text">Save</p>
                  </button>
                <% if(lockButton) {%>
                  <button type="button" class="bookmarkBtn2" id="showPopup">
                    <span class="IconContainer2">
                      <svg class="svg-icon2" viewBox="0 0 20 20">
                                              <path d="M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878"></path>
                                          </svg>
                    </span>
                    <p class="text">Lock</p>
                  </button>
                  <% } %>
            </div>
            </form>
            <form >
            <div id="popup" class="popup">
              <h1 style="text-decoration: bold;">Do you want to Lock this page content ??</h1>
              <p>Locking this page disable other public users to see the content written</p>
              <input type="text" name="passkey" id="passkey" placeholder="Enter a passkey to Lock" style="margin-top: 10px; padding: 10px; width: 95%; background-color: #1E1E1E; border-radius: 12px; color: #709f44;" >
              
              <div class="lock-cancel-btn">
                <!-- <button type="button" id="hidePopup">Cancel</button> -->
                <!-- <button type="submit" id="lock" formaction="/Text/lock" formmethod="post" >Lock</button>
                 -->
                 <button class="bookmarkBtn" type="button" id="hidePopup">
                  <span class="IconContainer">
                    <svg class="svg-icon" viewBox="0 0 20 20">
                              <path d="M10.185,1.417c-4.741,0-8.583,3.842-8.583,8.583c0,4.74,3.842,8.582,8.583,8.582S18.768,14.74,18.768,10C18.768,5.259,14.926,1.417,10.185,1.417 M10.185,17.68c-4.235,0-7.679-3.445-7.679-7.68c0-4.235,3.444-7.679,7.679-7.679S17.864,5.765,17.864,10C17.864,14.234,14.42,17.68,10.185,17.68 M10.824,10l2.842-2.844c0.178-0.176,0.178-0.46,0-0.637c-0.177-0.178-0.461-0.178-0.637,0l-2.844,2.841L7.341,6.52c-0.176-0.178-0.46-0.178-0.637,0c-0.178,0.176-0.178,0.461,0,0.637L9.546,10l-2.841,2.844c-0.178,0.176-0.178,0.461,0,0.637c0.178,0.178,0.459,0.178,0.637,0l2.844-2.841l2.844,2.841c0.178,0.178,0.459,0.178,0.637,0c0.178-0.176,0.178-0.461,0-0.637L10.824,10z"></path>
                            </svg>
                  </span>
                  <p class="text">Cancel</p>
                </button>

                 <button type="submit" class="bookmarkBtn2" id="lock" formaction="/Text/lock" formmethod="post">
                  <span class="IconContainer2">
                    <svg class="svg-icon2" viewBox="0 0 20 20">
                                            <path d="M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878"></path>
                                        </svg>
                  </span>
                  <p class="text">Lock</p>
                </button>
              </div>
            

            </div>
            </form>
           
              
            <!-- Overlay div -->
            <div id="overlay" class="overlay"></div>

            <!-- Warning Popup -->
            <div id="warningPopup" class="popup" style="display: none;">
                <h1 style="text-decoration: bold; color: beige; margin-bottom: 20px;">⚠️ Important Notice</h1>
                <p style="color: beige; font-size: 1.1em; line-height: 1.6; margin-bottom: 30px;">
                    This website is made for Speed Sharing purpose. Please do not use it for Storing Data, your data won't be available after 30 days. Make sure you have backed up your data.
                </p>
                <div class="lock-cancel-btn" style="position: relative; bottom: auto; right: auto; margin-top: 20px; justify-content: center;">
                    <button class="bookmarkBtn" type="button" id="hideWarningPopup">
                        <span class="IconContainer">
                            <svg class="svg-icon" viewBox="0 0 20 20">
                                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293l-3 3a1 1 0 01-1.414 0l-1.5-1.5a1 1 0 011.414-1.414L9 9.586l2.293-2.293a1 1 0 011.414 1.414z" fill="black"></path>
                            </svg>
                        </span>
                        <p class="text" style="font-size: 0.85em;">I Understand</p>
                    </button>
                </div>
            </div>
            <!-- Warning Overlay -->
            <div id="warningOverlay" class="overlay" style="display: none;"></div>

        </div>
    </div>
    
    <script>

      
      document.getElementById('showPopup').addEventListener("click", ()=>{
        document.getElementById('popup').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
      });
    

      document.getElementById('hidePopup').addEventListener("click", ()=>{
        document.getElementById('popup').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
      });
      
      // Warning popup functionality
      const hideWarningPopup = document.getElementById('hideWarningPopup');
      if (hideWarningPopup) {
          hideWarningPopup.addEventListener("click", ()=>{
              document.getElementById('warningPopup').style.display = 'none';
              document.getElementById('warningOverlay').style.display = 'none';
          });
      }

      // Show warning popup on page load every time
      window.addEventListener('DOMContentLoaded', function() {
          document.getElementById('warningPopup').style.display = 'block';
          document.getElementById('warningOverlay').style.display = 'block';
      });
      
      document.addEventListener('keydown', function(event) {
    if ((event.ctrlKey || event.metaKey) && event.key === 's') {
        event.preventDefault();
        const form = document.getElementById('textForm');
        if (form) {
            form.submit();
        } else {
            console.error('Form not found.');
        }
    }
});

   
    </script>
    <%- include('./partials/footer.ejs') %>
</body>
</html>